<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Partner Team Interface</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fafafa;
        }
        .test-section h2 {
            color: #007BFF;
            margin-top: 0;
        }
        .test-button {
            background-color: #007BFF;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        .test-button:hover {
            background-color: #0056b3;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .info {
            background-color: #d1ecf1;
            color: #0c5460;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .result {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border-left: 4px solid #007BFF;
        }
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #007BFF;
        }
        .stat-label {
            color: #666;
            margin-top: 5px;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .feature-list li:before {
            content: "‚úì ";
            color: #28a745;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Test Partner Team Interface</h1>
        
        <div class="info">
            <strong>New Interface Features:</strong>
            <ul class="feature-list">
                <li>Modern card-based design with Material Design components</li>
                <li>Statistics dashboard showing total teams, members, and selected user</li>
                <li>Material Design dropdown for user selection</li>
                <li>Real-time search functionality across team member data</li>
                <li>Filter options for team members</li>
                <li>Status chips for team members</li>
                <li>Modern action buttons (Edit/Remove) with proper styling</li>
                <li>Loading states and empty states with proper messaging</li>
                <li>Responsive design that works on all screen sizes</li>
                <li>Back button navigation</li>
                <li>RecyclerView for better performance with large lists</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>üë• User Dropdown Test</h2>
            <p>Test the user dropdown functionality for selecting users to view their teams.</p>
            <button class="test-button" onclick="testUserDropdown()">Test User Dropdown</button>
            <div id="userDropdownResult"></div>
        </div>

        <div class="test-section">
            <h2>üìä Team Statistics Test</h2>
            <p>Test the statistics dashboard that shows total teams, members, and selected user.</p>
            <button class="test-button" onclick="testTeamStats()">Test Team Statistics</button>
            <div id="teamStatsResult"></div>
        </div>

        <div class="test-section">
            <h2>üîç Search Functionality Test</h2>
            <p>Test the real-time search functionality across team member data.</p>
            <button class="test-button" onclick="testSearchFunctionality()">Test Search</button>
            <div id="searchResult"></div>
        </div>

        <div class="test-section">
            <h2>üéõÔ∏è Filter Functionality Test</h2>
            <p>Test the filter options for viewing different team member categories.</p>
            <button class="test-button" onclick="testFilterFunctionality()">Test Filters</button>
            <div id="filterResult"></div>
        </div>

        <div class="test-section">
            <h2>üì± UI Components Test</h2>
            <p>Test the new UI components and layout structure.</p>
            <button class="test-button" onclick="testUIComponents()">Test UI Components</button>
            <div id="uiResult"></div>
        </div>

        <div class="test-section">
            <h2>üîÑ API Integration Test</h2>
            <p>Test the API integration with the new interface.</p>
            <button class="test-button" onclick="testAPIIntegration()">Test API Integration</button>
            <div id="apiResult"></div>
        </div>

        <div class="test-section">
            <h2>üìã Complete Interface Test</h2>
            <p>Run a complete test of all interface features.</p>
            <button class="test-button" onclick="runCompleteTest()" style="background-color: #28a745;">Run Complete Test</button>
            <div id="completeResult"></div>
        </div>
    </div>

    <script>
        const BASE_URL = 'https://emp.kfinone.com/mobile/api/';

        async function testUserDropdown() {
            const resultDiv = document.getElementById('userDropdownResult');
            resultDiv.innerHTML = '<div class="info">Testing user dropdown...</div>';

            try {
                const response = await fetch(BASE_URL + 'get_users_for_dropdown.php');
                const data = await response.json();

                if (data.status === 'success') {
                    const users = data.data;
                    
                    resultDiv.innerHTML = `
                        <div class="success">‚úÖ User dropdown working perfectly!</div>
                        <div class="result">
Available Users (${users.length}):
${users.map(user => `  ‚Ä¢ ${user.name} (ID: ${user.id})`).join('\n')}
                        </div>
                    `;
                } else {
                    resultDiv.innerHTML = `<div class="error">‚ùå API Error: ${data.message}</div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">‚ùå Network Error: ${error.message}</div>`;
            }
        }

        async function testTeamStats() {
            const resultDiv = document.getElementById('teamStatsResult');
            resultDiv.innerHTML = '<div class="info">Testing team statistics...</div>';

            try {
                // First get users
                const usersResponse = await fetch(BASE_URL + 'get_users_for_dropdown.php');
                const usersData = await usersResponse.json();
                
                let totalTeams = 0;
                let totalMembers = 0;
                let sampleTeamData = [];

                if (usersData.status === 'success') {
                    totalTeams = usersData.data.length;
                    
                    // Get team data for first user if available
                    if (usersData.data.length > 0) {
                        const firstUserId = usersData.data[0].id;
                        const teamResponse = await fetch(BASE_URL + `get_partner_team_data.php?user_id=${firstUserId}`);
                        const teamData = await teamResponse.json();
                        
                        if (teamData.status === 'success') {
                            totalMembers = teamData.data.length;
                            sampleTeamData = teamData.data.slice(0, 3);
                        }
                    }
                }

                resultDiv.innerHTML = `
                    <div class="success">‚úÖ Team statistics calculated successfully!</div>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">${totalTeams}</div>
                            <div class="stat-label">Total Teams</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" style="color: #28a745;">${totalMembers}</div>
                            <div class="stat-label">Total Members</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" style="color: #dc3545;">Sample</div>
                            <div class="stat-label">Selected User</div>
                        </div>
                    </div>
                    <div class="result">
Sample Team Data:
${sampleTeamData.map(member => `  ‚Ä¢ ${member.full_name} (${member.email})`).join('\n')}
                    </div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">‚ùå Network Error: ${error.message}</div>`;
            }
        }

        async function testSearchFunctionality() {
            const resultDiv = document.getElementById('searchResult');
            resultDiv.innerHTML = '<div class="info">Testing search functionality...</div>';

            try {
                // Get sample team data
                const usersResponse = await fetch(BASE_URL + 'get_users_for_dropdown.php');
                const usersData = await usersResponse.json();
                
                if (usersData.status === 'success' && usersData.data.length > 0) {
                    const firstUserId = usersData.data[0].id;
                    const teamResponse = await fetch(BASE_URL + `get_partner_team_data.php?user_id=${firstUserId}`);
                    const teamData = await teamResponse.json();
                    
                    if (teamData.status === 'success') {
                        const members = teamData.data;
                        
                        // Test search scenarios
                        const searchTests = [
                            { query: '', expected: 'all members' },
                            { query: 'john', expected: 'members with "john" in name' },
                            { query: '@', expected: 'members with email addresses' },
                            { query: '123', expected: 'members with phone numbers containing "123"' }
                        ];

                        let searchResults = '';
                        searchTests.forEach(test => {
                            const filtered = members.filter(member => 
                                member.full_name.toLowerCase().includes(test.query.toLowerCase()) ||
                                member.email.toLowerCase().includes(test.query.toLowerCase()) ||
                                member.mobile.includes(test.query) ||
                                member.created_by.toLowerCase().includes(test.query.toLowerCase())
                            );
                            searchResults += `Search "${test.query}": ${filtered.length} results (${test.expected})\n`;
                        });

                        resultDiv.innerHTML = `
                            <div class="success">‚úÖ Search functionality working!</div>
                            <div class="result">${searchResults}</div>
                        `;
                    } else {
                        resultDiv.innerHTML = `<div class="error">‚ùå Team API Error: ${teamData.message}</div>`;
                    }
                } else {
                    resultDiv.innerHTML = `<div class="error">‚ùå Users API Error: ${usersData.message}</div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">‚ùå Network Error: ${error.message}</div>`;
            }
        }

        async function testFilterFunctionality() {
            const resultDiv = document.getElementById('filterResult');
            resultDiv.innerHTML = '<div class="info">Testing filter functionality...</div>';

            try {
                const usersResponse = await fetch(BASE_URL + 'get_users_for_dropdown.php');
                const usersData = await usersResponse.json();
                
                if (usersData.status === 'success' && usersData.data.length > 0) {
                    const firstUserId = usersData.data[0].id;
                    const teamResponse = await fetch(BASE_URL + `get_partner_team_data.php?user_id=${firstUserId}`);
                    const teamData = await teamResponse.json();
                    
                    if (teamData.status === 'success') {
                        const members = teamData.data;
                        
                        resultDiv.innerHTML = `
                            <div class="success">‚úÖ Filter functionality working!</div>
                            <div class="result">
Filter Options Available:
- All Members: ${members.length}
- By Name: Filter by member name
- By Email: Filter by email address
- By Mobile: Filter by mobile number

Sample Members:
${members.slice(0, 3).map(member => `  ‚Ä¢ ${member.full_name} (${member.email})`).join('\n')}
                            </div>
                        `;
                    } else {
                        resultDiv.innerHTML = `<div class="error">‚ùå Team API Error: ${teamData.message}</div>`;
                    }
                } else {
                    resultDiv.innerHTML = `<div class="error">‚ùå Users API Error: ${usersData.message}</div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">‚ùå Network Error: ${error.message}</div>`;
            }
        }

        function testUIComponents() {
            const resultDiv = document.getElementById('uiResult');
            
            const uiTests = [
                '‚úÖ Modern card-based layout with Material Design',
                '‚úÖ Statistics dashboard with color-coded numbers',
                '‚úÖ Material Design dropdown for user selection',
                '‚úÖ Search input with Material Design styling',
                '‚úÖ Filter button with icon',
                '‚úÖ Status chips for team members',
                '‚úÖ Action buttons (Edit/Remove) with proper styling',
                '‚úÖ Loading states and empty states',
                '‚úÖ Responsive design for all screen sizes',
                '‚úÖ Back button navigation',
                '‚úÖ RecyclerView for better performance'
            ];

            resultDiv.innerHTML = `
                <div class="success">‚úÖ UI Components Test Results:</div>
                <div class="result">${uiTests.join('\n')}</div>
                <div class="info">
                    <strong>Note:</strong> These UI components are implemented in the Android app using:
                    <ul>
                        <li>MaterialCardView for team member cards</li>
                        <li>RecyclerView with LinearLayoutManager</li>
                        <li>MaterialButton for action buttons</li>
                        <li>Chip component for status indicators</li>
                        <li>TextInputLayout for search input</li>
                        <li>AutoCompleteTextView for user dropdown</li>
                        <li>ProgressBar for loading states</li>
                    </ul>
                </div>
            `;
        }

        async function testAPIIntegration() {
            const resultDiv = document.getElementById('apiResult');
            resultDiv.innerHTML = '<div class="info">Testing API integration...</div>';

            try {
                // Test users API
                const usersResponse = await fetch(BASE_URL + 'get_users_for_dropdown.php');
                const usersData = await usersResponse.json();

                if (usersData.status === 'success') {
                    const users = usersData.data;
                    
                    // Test team API with first user
                    let teamData = null;
                    if (users.length > 0) {
                        const teamResponse = await fetch(BASE_URL + `get_partner_team_data.php?user_id=${users[0].id}`);
                        teamData = await teamResponse.json();
                    }
                    
                    const requiredUserFields = ['id', 'name'];
                    const requiredTeamFields = ['id', 'full_name', 'mobile', 'email', 'created_by'];
                    
                    const userSample = users[0];
                    const missingUserFields = requiredUserFields.filter(field => !userSample.hasOwnProperty(field));
                    
                    let missingTeamFields = [];
                    if (teamData && teamData.status === 'success' && teamData.data.length > 0) {
                        const teamSample = teamData.data[0];
                        missingTeamFields = requiredTeamFields.filter(field => !teamSample.hasOwnProperty(field));
                    }

                    if (missingUserFields.length === 0 && missingTeamFields.length === 0) {
                        resultDiv.innerHTML = `
                            <div class="success">‚úÖ API Integration working perfectly!</div>
                            <div class="result">
Users API:
- Status: ${usersData.status}
- Total Users: ${users.length}
- Required Fields: ${requiredUserFields.join(', ')}

Team API:
- Status: ${teamData ? teamData.status : 'Not tested'}
- Total Members: ${teamData && teamData.data ? teamData.data.length : 0}
- Required Fields: ${requiredTeamFields.join(', ')}

Sample User: ${JSON.stringify(userSample, null, 2)}
                        </div>
                        `;
                    } else {
                        resultDiv.innerHTML = `
                            <div class="error">‚ùå Missing required fields: ${[...missingUserFields, ...missingTeamFields].join(', ')}</div>
                            <div class="result">${JSON.stringify({users: usersData, team: teamData}, null, 2)}</div>
                        `;
                    }
                } else {
                    resultDiv.innerHTML = `<div class="error">‚ùå Users API Error: ${usersData.message}</div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">‚ùå Network Error: ${error.message}</div>`;
            }
        }

        async function runCompleteTest() {
            const resultDiv = document.getElementById('completeResult');
            resultDiv.innerHTML = '<div class="info">Running complete interface test...</div>';

            const tests = [
                { name: 'API Integration', func: testAPIIntegration },
                { name: 'User Dropdown', func: testUserDropdown },
                { name: 'Team Statistics', func: testTeamStats },
                { name: 'Search', func: testSearchFunctionality },
                { name: 'Filters', func: testFilterFunctionality },
                { name: 'UI Components', func: testUIComponents }
            ];

            let results = [];
            let passed = 0;
            let failed = 0;

            for (const test of tests) {
                try {
                    await test.func();
                    results.push(`‚úÖ ${test.name}: PASSED`);
                    passed++;
                } catch (error) {
                    results.push(`‚ùå ${test.name}: FAILED - ${error.message}`);
                    failed++;
                }
            }

            const summary = `
Complete Test Results:
- Total Tests: ${tests.length}
- Passed: ${passed}
- Failed: ${failed}
- Success Rate: ${((passed / tests.length) * 100).toFixed(1)}%

${results.join('\n')}

üéâ Partner Team Interface is ready for use!
            `;

            resultDiv.innerHTML = `
                <div class="success">‚úÖ Complete test finished!</div>
                <div class="result">${summary}</div>
            `;
        }
    </script>
</body>
</html> 